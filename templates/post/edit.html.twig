{% extends 'base.html.twig' %}

{% block title %}Modifier un post{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/post/newpost.css') }}">
{% endblock %}

{% block body %}
<main class="manga-post-container">
    <form method="post" enctype="multipart/form-data" class="post-form">
        <label for="post-title">Titre du post :</label>
        <input type="text" id="post-title" name="titre" placeholder="Ex : Les gars vous êtes plutôt team Sakura ou team Hinata ?" required value="{{ post.titre }}">
        
        <label for="post-manga">Manga :</label>
        <input type="text" id="post-manga" name="manga" placeholder="Ex : Naruto" required value="{{ post.manga.titre }}">
        
        <label for="post-text">Votre texte :</label>
        <div class="editor-toolbar">
            <button type="button" class="editor-btn"><b>B</b></button>
            <button type="button" class="editor-btn"><i>I</i></button>
            <button type="button" class="editor-btn"><u>U</u></button>
            <button type="button" class="editor-btn"><s>S</s></button>
            <button type="button" class="editor-btn"><i class="fa-solid fa-list-ul"></i></button>
            <button type="button" class="editor-btn"><i class="fa-solid fa-list-ol"></i></button>
            <button type="button" class="editor-btn"><i class="fa-solid fa-quote-left"></i></button>
            <button type="button" class="editor-btn"><i class="fa-solid fa-code"></i></button>
            <button type="button" class="editor-btn"><i class="fa-solid fa-eye-slash"></i></button>
            <button type="button" class="editor-btn"><i class="fa-solid fa-smile"></i></button>
            <!-- Bouton pour insérer des images -->
            <button type="button" class="editor-btn"><i class="fa-solid fa-image"></i></button>
            <!-- Bouton pour insérer des vidéos ou fichiers audio -->
            <button type="button" class="editor-btn"><i class="fa-solid fa-play"></i></button>
            <button type="button" class="editor-btn"><i class="fa-solid fa-question"></i></button>
        </div>
        <textarea id="post-text" name="contenu" rows="6" placeholder="Exprimez votre avis ici..." required>{{ post.contenu }}</textarea>
        
        <div class="form-buttons">
            <button type="submit" class="submit-btn">Enregistrer</button>
            <button type="button" class="cancel-btn" onclick="window.history.back();">Annuler</button>
        </div>
        {% if post.media %}
            <div class="mt-3">
                <p>Type : {{ post.mediaType }}</p>
                {% if post.mediaType == 'image' %}
                    <img src="{{ asset('uploads/' ~ post.media) }}" alt="Media" class="img-fluid">
                {% elseif post.mediaType == 'video' %}
                    <video controls class="w-100">
                        <source src="{{ asset('uploads/' ~ post.media) }}" type="video/mp4">
                    </video>
                {% elseif post.mediaType == 'audio' %}
                    <audio controls>
                        <source src="{{ asset('uploads/' ~ post.media) }}" type="audio/mpeg">
                    </audio>
                {% endif %}
            </div>
        {% else %}
            <p>Aucun média associé</p>
        {% endif %}
    </form>
</main>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('js/post/newpost.js') }}"></script>
{% endblock %}
